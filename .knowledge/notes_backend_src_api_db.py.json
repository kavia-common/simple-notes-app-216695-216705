{"is_source_file": true, "format": "Python", "description": "This file provides utility functions for managing an SQLite database used by the Notes backend. It handles database path resolution, connection creation, schema initialization including table and trigger creation, and data retrieval. The functions support setup and querying operations for the notes data.", "external_files": ["os", "sqlite3", "pathlib.Path"], "external_methods": ["os.getenv", "Path.resolve", "Path.mkdir", "sqlite3.connect", "sqlite3.Row"], "published": ["init_db", "fetch_one_note"], "classes": [], "methods": [{"name": "str _default_db_path()", "description": "Computes the default path for the SQLite database relative to the project root.", "scope": "", "scopeKind": ""}, {"name": "str get_db_path()", "description": "Resolves the database path from environment variable or defaults.", "scope": "", "scopeKind": ""}, {"name": "sqlite3.Connection get_connection()", "description": "Creates and returns a new SQLite database connection with row factory enabled.", "scope": "", "scopeKind": ""}, {"name": "Dict[str,Any] row_to_note_dict(row: sqlite3.Row)", "description": "Converts a SQLite row into a dictionary matching the notes schema.", "scope": "", "scopeKind": ""}, {"name": "None init_db()", "description": "Initializes the database schema for notes, creating table and trigger if they do not exist.", "scope": "", "scopeKind": ""}, {"name": "Optional[Dict[str,Any]] fetch_one_note(conn: sqlite3.Connection, note_id: int)", "description": "Fetches a single note by its ID, returning a dictionary or None.", "scope": "", "scopeKind": ""}], "calls": ["os.getenv", "Path.__resolve__", "Path.mkdir", "sqlite3.connect", "conn.cursor", "cur.execute", "conn.commit", "conn.close", "cur.fetchone"], "search-terms": ["sqlite3 database initialization", "notes table schema", "notes trigger", "database path resolution", "Notes backend database"], "state": 2, "file_id": 5, "knowledge_revision": 11, "git_revision": "", "ctags": [{"_type": "tag", "name": "_default_db_path", "path": "/home/kavia/workspace/code-generation/simple-notes-app-216695-216705/notes_backend/src/api/db.py", "pattern": "/^def _default_db_path() -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "fetch_one_note", "path": "/home/kavia/workspace/code-generation/simple-notes-app-216695-216705/notes_backend/src/api/db.py", "pattern": "/^def fetch_one_note(conn: sqlite3.Connection, note_id: int) -> Optional[Dict[str, Any]]:$/", "language": "Python", "typeref": "typename:Optional[Dict[str,Any]]", "kind": "function", "signature": "(conn: sqlite3.Connection, note_id: int)"}, {"_type": "tag", "name": "get_connection", "path": "/home/kavia/workspace/code-generation/simple-notes-app-216695-216705/notes_backend/src/api/db.py", "pattern": "/^def get_connection() -> sqlite3.Connection:$/", "language": "Python", "typeref": "typename:sqlite3.Connection", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "get_db_path", "path": "/home/kavia/workspace/code-generation/simple-notes-app-216695-216705/notes_backend/src/api/db.py", "pattern": "/^def get_db_path() -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "init_db", "path": "/home/kavia/workspace/code-generation/simple-notes-app-216695-216705/notes_backend/src/api/db.py", "pattern": "/^def init_db() -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "row_to_note_dict", "path": "/home/kavia/workspace/code-generation/simple-notes-app-216695-216705/notes_backend/src/api/db.py", "pattern": "/^def row_to_note_dict(row: sqlite3.Row) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "(row: sqlite3.Row)"}], "hash": "c44230d9885db446f114324531b76b1a", "format-version": 4, "code-base-name": "notes_backend", "filename": "notes_backend/src/api/db.py", "revision_history": [{"11": ""}]}